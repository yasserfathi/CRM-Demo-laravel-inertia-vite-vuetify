import{u as x,v as S,X as T,o as y,c as w,a as e,w as t,V as E,F as N,r as o,b as O,d as m,e as f,f as u,g as A,h as H,i as M,j as d,k as j,l as n,m as h,n as r,p as B,q as c,s as v,t as p,x as V,y as g,z as U,A as z,B as R,C as q,D as G,E as K,G as I}from"./app-6524943b.js";import P from"./Header-69fa1213.js";import X from"./Menu-ff37a26e.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";import{V as L}from"./VDataTable-f4231590.js";const Q={props:{services:Array},data:()=>({dialog:!1,dialogDelete:!1,headers:[{title:"Name",align:"start",sortable:!0,key:"name"},{title:"Actions",key:"actions",sortable:!1}],editedIndex:-1,editedItem:{id:"",name:""},defaultItem:{id:"",name:""},nameRules:[a=>!!a||"Name is required"]}),setup(){const a=x(),l=S({id:"",name:""});return{theme:a,dataForm:l,toggleTheme:()=>a.global.name.value=a.global.current.value.dark?"light":"dark"}},components:{Head:T,VDataTable:L,Header:P,Menu:X},computed:{formTitle(){return this.editedItem.id===""?"New Item":"Edit Item"},formSaveEdit(){return this.editedItem.id===""?"Save":"Edit"}},watch:{dialog(a){a||this.close()},dialogDelete(a){a||this.closeDelete()}},methods:{editItem(a){this.editedIndex=this.services.indexOf(a),this.editedItem=Object.assign({},a),this.dialog=!0},deleteItem(a){this.editedIndex=this.services.indexOf(a),this.editedItem=Object.assign({},a),this.dialogDelete=!0},deleteItemConfirm(){this.dataForm.delete(route("service.destroy",this.editedItem.id),{preserveScroll:!0}),this.closeDelete()},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},async save(){this.dataForm.id=this.editedItem.id,this.dataForm.name=this.editedItem.name;const{valid:a}=await this.$refs.form.validate();a&&(this.error="",this.editedItem.id===""?this.dataForm.post(route("service.store"),{preserveScroll:!0,onSuccess:()=>{this.dataForm.reset()},onError:l=>{this.error=l.email},onFinish:()=>this.dataForm.reset()}):this.dataForm.put(route("service.update",this.dataForm.id),{preserveScroll:!0,onSuccess:()=>{this.dataForm.reset()},onError:l=>{this.error=l.email},onFinish:()=>this.dataForm.reset()})),this.close()}}},W={class:"text-h6"};function Y(a,l,_,Z,$,i){const C=o("Head"),k=o("Header"),b=o("Menu"),F=o("v-data-table");return y(),w(N,null,[e(C,{title:"Services "}),e(E,{id:"inspire"},{default:t(()=>[e(k),e(O,{class:"bg-grey-lighten-3"},{default:t(()=>[e(m,null,{default:t(()=>[e(f,null,{default:t(()=>[e(u,{cols:"3"},{default:t(()=>[e(b)]),_:1}),e(u,null,{default:t(()=>[e(A,{"min-height":"40vh",rounded:"lg"},{default:t(()=>[e(m,null,{default:t(()=>[e(F,{headers:a.headers,items:_.services,"item-value":"profile","items-per-page":5,"sort-by":[{key:"name",order:"asc"}],class:"elevation-1"},{top:t(()=>[e(H,{color:"#ddd",flat:""},{default:t(()=>[e(M,null,{default:t(()=>[d("Services")]),_:1}),e(j,{class:"mx-4",inset:"",vertical:""}),e(n),e(h,{modelValue:a.dialog,"onUpdate:modelValue":l[3]||(l[3]=s=>a.dialog=s),"max-width":"500px"},{activator:t(({props:s})=>[e(r,B({color:"primary",dark:"",class:"mb-2"},s,{variant:"flat"}),{default:t(()=>[e(c,{icon:"mdi-plus"})]),_:2},1040)]),default:t(()=>[e(v,null,{default:t(()=>[e(p,{variant:"flat",color:"black"},{default:t(()=>[V("span",W,g(i.formTitle),1)]),_:1}),e(U,{ref:"form","fast-fail":"",onSubmit:l[2]||(l[2]=z(()=>{},["prevent"]))},{default:t(()=>[e(R,null,{default:t(()=>[e(m,null,{default:t(()=>[e(f,null,{default:t(()=>[e(u,{cols:"12",sm:"12",md:"12"},{default:t(()=>[e(q,{modelValue:a.editedItem.name,"onUpdate:modelValue":l[0]||(l[0]=s=>a.editedItem.name=s),variant:"underlined",rules:a.nameRules,label:"Name"},null,8,["modelValue","rules"]),G(V("input",{type:"hidden","onUpdate:modelValue":l[1]||(l[1]=s=>a.editedItem.id=s)},null,512),[[K,a.editedItem.id]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512),e(I,null,{default:t(()=>[e(n),e(r,{color:"error",variant:"flat",onClick:i.close},{default:t(()=>[d(" Cancel ")]),_:1},8,["onClick"]),e(r,{color:"success",variant:"flat",onClick:i.save},{default:t(()=>[d(g(i.formSaveEdit),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(h,{modelValue:a.dialogDelete,"onUpdate:modelValue":l[4]||(l[4]=s=>a.dialogDelete=s),"max-width":"480px"},{default:t(()=>[e(v,null,{default:t(()=>[e(p,{class:"text-h5"},{default:t(()=>[d("Are you sure you want to delete this item?")]),_:1}),e(I,null,{default:t(()=>[e(n),e(r,{color:"error",variant:"flat",onClick:i.closeDelete},{default:t(()=>[d("Cancel")]),_:1},8,["onClick"]),e(r,{color:"success",variant:"flat",onClick:i.deleteItemConfirm},{default:t(()=>[d("OK")]),_:1},8,["onClick"]),e(n)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.actions":t(({item:s})=>[e(c,{size:"small",class:"me-2",onClick:D=>i.editItem(s.raw)},{default:t(()=>[d(" mdi-pencil ")]),_:2},1032,["onClick"]),e(c,{size:"small",onClick:D=>i.deleteItem(s.raw)},{default:t(()=>[d(" mdi-delete ")]),_:2},1032,["onClick"])]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const ie=J(Q,[["render",Y]]);export{ie as default};
