import{u as D,v as T,X as y,o as w,c as S,a as e,w as t,V as E,F as A,r,b as N,d as m,e as f,f as u,g as O,h as H,i as M,j as i,k as j,l as n,m as h,n as o,p as B,q as c,s as p,t as g,x as v,y as V,z as U,A as P,B as z,C as R,D as q,E as G,G as I}from"./app-6524943b.js";import K from"./Header-69fa1213.js";import X from"./Menu-ff37a26e.js";import{_ as J}from"./_plugin-vue_export-helper-c27b6911.js";import{V as L}from"./VDataTable-f4231590.js";const Q={props:{products:Array},data:()=>({dialog:!1,dialogDelete:!1,headers:[{title:"Name",align:"start",sortable:!0,key:"name"},{title:"Actions",key:"actions",sortable:!1}],editedIndex:-1,editedItem:{id:"",name:""},defaultItem:{id:"",name:""},items:[{text:"Users",icon:"mdi-account-group"},{text:"Audience",icon:"mdi-account"},{text:"Conversions",icon:"mdi-flag"}],nameRules:[a=>!!a||"Name is required"]}),setup(){const a=D(),l=T({id:"",name:""});return{theme:a,dataForm:l,toggleTheme:()=>a.global.name.value=a.global.current.value.dark?"light":"dark"}},components:{Head:y,VDataTable:L,Header:K,Menu:X},computed:{formTitle(){return this.editedItem.id===""?"New Item":"Edit Item"},formSaveEdit(){return this.editedItem.id===""?"Save":"Edit"}},watch:{dialog(a){a||this.close()},dialogDelete(a){a||this.closeDelete()}},methods:{editItem(a){this.editedIndex=this.products.indexOf(a),this.editedItem=Object.assign({},a),this.dialog=!0},deleteItem(a){this.editedIndex=this.products.indexOf(a),this.editedItem=Object.assign({},a),this.dialogDelete=!0},deleteItemConfirm(){this.dataForm.delete(route("product.destroy",this.editedItem.id),{preserveScroll:!0}),this.closeDelete()},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},async save(){this.dataForm.id=this.editedItem.id,this.dataForm.name=this.editedItem.name;const{valid:a}=await this.$refs.form.validate();a&&(this.error="",this.editedItem.id===""?this.dataForm.post(route("product.store"),{preserveScroll:!0,onSuccess:()=>{this.dataForm.reset()},onError:l=>{this.error=l.email},onFinish:()=>this.dataForm.reset()}):this.dataForm.put(route("product.update",this.dataForm.id),{preserveScroll:!0,onSuccess:()=>{this.dataForm.reset()},onError:l=>{this.error=l.email},onFinish:()=>this.dataForm.reset()})),this.close()}}},W={class:"text-h6"};function Y(a,l,_,Z,$,s){const C=r("Head"),k=r("Header"),b=r("Menu"),x=r("v-data-table");return w(),S(A,null,[e(C,{title:"Products "}),e(E,{id:"inspire"},{default:t(()=>[e(k),e(N,{class:"bg-grey-lighten-3"},{default:t(()=>[e(m,null,{default:t(()=>[e(f,null,{default:t(()=>[e(u,{cols:"3"},{default:t(()=>[e(b)]),_:1}),e(u,null,{default:t(()=>[e(O,{"min-height":"40vh",rounded:"lg"},{default:t(()=>[e(m,null,{default:t(()=>[e(x,{headers:a.headers,items:_.products,"item-value":"profile","items-per-page":5,"sort-by":[{key:"name",order:"asc"}],class:"elevation-1"},{top:t(()=>[e(H,{color:"#ddd",flat:""},{default:t(()=>[e(M,null,{default:t(()=>[i("Products")]),_:1}),e(j,{class:"mx-4",inset:"",vertical:""}),e(n),e(h,{modelValue:a.dialog,"onUpdate:modelValue":l[3]||(l[3]=d=>a.dialog=d),"max-width":"500px"},{activator:t(({props:d})=>[e(o,B({color:"primary",dark:"",class:"mb-2"},d,{variant:"flat"}),{default:t(()=>[e(c,{icon:"mdi-plus"})]),_:2},1040)]),default:t(()=>[e(p,null,{default:t(()=>[e(g,{variant:"flat",color:"black"},{default:t(()=>[v("span",W,V(s.formTitle),1)]),_:1}),e(U,{ref:"form","fast-fail":"",onSubmit:l[2]||(l[2]=P(()=>{},["prevent"]))},{default:t(()=>[e(z,null,{default:t(()=>[e(m,null,{default:t(()=>[e(f,null,{default:t(()=>[e(u,{cols:"12",sm:"12",md:"12"},{default:t(()=>[e(R,{modelValue:a.editedItem.name,"onUpdate:modelValue":l[0]||(l[0]=d=>a.editedItem.name=d),variant:"underlined",rules:a.nameRules,label:"Name"},null,8,["modelValue","rules"]),q(v("input",{type:"hidden","onUpdate:modelValue":l[1]||(l[1]=d=>a.editedItem.id=d)},null,512),[[G,a.editedItem.id]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512),e(I,null,{default:t(()=>[e(n),e(o,{color:"error",variant:"flat",onClick:s.close},{default:t(()=>[i(" Cancel ")]),_:1},8,["onClick"]),e(o,{color:"success",variant:"flat",onClick:s.save},{default:t(()=>[i(V(s.formSaveEdit),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(h,{modelValue:a.dialogDelete,"onUpdate:modelValue":l[4]||(l[4]=d=>a.dialogDelete=d),"max-width":"480px"},{default:t(()=>[e(p,null,{default:t(()=>[e(g,{class:"text-h5"},{default:t(()=>[i("Are you sure you want to delete this item?")]),_:1}),e(I,null,{default:t(()=>[e(n),e(o,{color:"error",variant:"flat",onClick:s.closeDelete},{default:t(()=>[i("Cancel")]),_:1},8,["onClick"]),e(o,{color:"success",variant:"flat",onClick:s.deleteItemConfirm},{default:t(()=>[i("OK")]),_:1},8,["onClick"]),e(n)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.actions":t(({item:d})=>[e(c,{size:"small",class:"me-2",onClick:F=>s.editItem(d.raw)},{default:t(()=>[i(" mdi-pencil ")]),_:2},1032,["onClick"]),e(c,{size:"small",onClick:F=>s.deleteItem(d.raw)},{default:t(()=>[i(" mdi-delete ")]),_:2},1032,["onClick"])]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const se=J(Q,[["render",Y]]);export{se as default};
