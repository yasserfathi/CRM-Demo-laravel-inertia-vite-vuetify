import{u as D,v as S,X as T,o as x,c as E,a as e,w as a,V as N,F as A,r,b as O,d as f,e as m,f as o,g as R,h as U,i as H,j as i,k as M,l as u,m as p,n,p as j,q as h,s as V,t as I,x as g,y as v,z as B,A as P,B as q,C as c,D as z,E as G,G as k}from"./app-6524943b.js";import K from"./Header-69fa1213.js";import X from"./Menu-ff37a26e.js";import{_ as $}from"./_plugin-vue_export-helper-c27b6911.js";import{V as J}from"./VDataTable-f4231590.js";const L={props:{salesmen:Array},data:()=>({dialog:!1,dialogDelete:!1,headers:[{title:"Name",align:"start",sortable:!0,key:"name"},{title:"E-mail",key:"email"},{title:"Phone",key:"phone"},{title:"Actions",key:"actions",sortable:!1}],editedIndex:-1,editedItem:{id:"",name:"",email:"",phone:""},defaultItem:{id:"",name:"",email:"",phone:""},items:[{text:"Users",icon:"mdi-account-group"},{text:"Audience",icon:"mdi-account"},{text:"Conversions",icon:"mdi-flag"}],nameRules:[t=>!!t||"Name is required"],phoneRules:[t=>(t==null?void 0:t.length)>9&&/[0-9-]+/.test(t)||"Phone Number is required and must be 10 digits"],emailRules:[t=>/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||"E-mail must be valid"]}),setup(){const t=D(),l=S({id:"",name:"",email:"",phone:""});return{theme:t,dataForm:l,toggleTheme:()=>t.global.name.value=t.global.current.value.dark?"light":"dark"}},components:{Head:T,VDataTable:J,Header:K,Menu:X},computed:{formTitle(){return this.editedItem.id===""?"New Item":"Edit Item"},formSaveEdit(){return this.editedItem.id===""?"Save":"Edit"}},watch:{dialog(t){t||this.close()},dialogDelete(t){t||this.closeDelete()}},methods:{editItem(t){this.editedIndex=this.salesmen.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem(t){this.editedIndex=this.salesmen.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm(){this.dataForm.delete(route("salesman.destroy",this.editedItem.id),{preserveScroll:!0}),this.closeDelete()},close(){this.dialog=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},closeDelete(){this.dialogDelete=!1,this.$nextTick(()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1})},async save(){this.dataForm.id=this.editedItem.id,this.dataForm.name=this.editedItem.name,this.dataForm.email=this.editedItem.email,this.dataForm.phone=this.editedItem.phone;const{valid:t}=await this.$refs.form.validate();t&&(this.error="",this.editedItem.id===""?this.dataForm.post(route("salesman.store"),{preserveScroll:!0,onSuccess:()=>{this.dataForm.reset()},onError:l=>{this.error=l.email},onFinish:()=>this.dataForm.reset()}):this.dataForm.put(route("salesman.update",this.dataForm.id),{preserveScroll:!0,onSuccess:()=>{this.dataForm.reset()},onError:l=>{this.error=l.email},onFinish:()=>this.dataForm.reset()})),this.close()}}},Q={class:"text-h6"};function W(t,l,C,Y,Z,s){const _=r("Head"),b=r("Header"),F=r("Menu"),w=r("v-data-table");return x(),E(A,null,[e(_,{title:"Salesmen "}),e(N,{id:"inspire"},{default:a(()=>[e(b),e(O,{class:"bg-grey-lighten-3"},{default:a(()=>[e(f,null,{default:a(()=>[e(m,null,{default:a(()=>[e(o,{cols:"3"},{default:a(()=>[e(F)]),_:1}),e(o,null,{default:a(()=>[e(R,{"min-height":"40vh",rounded:"lg"},{default:a(()=>[e(f,null,{default:a(()=>[e(w,{headers:t.headers,items:C.salesmen,"item-value":"profile","items-per-page":5,"sort-by":[{key:"name",order:"asc"}],class:"elevation-1"},{top:a(()=>[e(U,{color:"#ddd",flat:""},{default:a(()=>[e(H,null,{default:a(()=>[i("Salesmen")]),_:1}),e(M,{class:"mx-4",inset:"",vertical:""}),e(u),e(p,{modelValue:t.dialog,"onUpdate:modelValue":l[5]||(l[5]=d=>t.dialog=d),"max-width":"500px"},{activator:a(({props:d})=>[e(n,j({color:"primary",dark:"",class:"mb-2"},d,{variant:"flat"}),{default:a(()=>[e(h,{icon:"mdi-plus"})]),_:2},1040)]),default:a(()=>[e(V,null,{default:a(()=>[e(I,{variant:"flat",color:"black"},{default:a(()=>[g("span",Q,v(s.formTitle),1)]),_:1}),e(B,{ref:"form","fast-fail":"",onSubmit:l[4]||(l[4]=P(()=>{},["prevent"]))},{default:a(()=>[e(q,null,{default:a(()=>[e(f,null,{default:a(()=>[e(m,null,{default:a(()=>[e(o,{cols:"12",sm:"12",md:"12"},{default:a(()=>[e(c,{modelValue:t.editedItem.name,"onUpdate:modelValue":l[0]||(l[0]=d=>t.editedItem.name=d),variant:"underlined",rules:t.nameRules,label:"Name"},null,8,["modelValue","rules"]),z(g("input",{type:"hidden","onUpdate:modelValue":l[1]||(l[1]=d=>t.editedItem.id=d)},null,512),[[G,t.editedItem.id]])]),_:1})]),_:1}),e(m,null,{default:a(()=>[e(o,{cols:"12",sm:"12",md:"12"},{default:a(()=>[e(c,{modelValue:t.editedItem.email,"onUpdate:modelValue":l[2]||(l[2]=d=>t.editedItem.email=d),variant:"underlined",rules:t.emailRules,label:"E-mail"},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(m,null,{default:a(()=>[e(o,{cols:"12",sm:"12",md:"12"},{default:a(()=>[e(c,{modelValue:t.editedItem.phone,"onUpdate:modelValue":l[3]||(l[3]=d=>t.editedItem.phone=d),variant:"underlined",rules:t.phoneRules,label:"Phone"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512),e(k,null,{default:a(()=>[e(u),e(n,{color:"error",variant:"flat",onClick:s.close},{default:a(()=>[i(" Cancel ")]),_:1},8,["onClick"]),e(n,{color:"success",variant:"flat",onClick:s.save},{default:a(()=>[i(v(s.formSaveEdit),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(p,{modelValue:t.dialogDelete,"onUpdate:modelValue":l[6]||(l[6]=d=>t.dialogDelete=d),"max-width":"480px"},{default:a(()=>[e(V,null,{default:a(()=>[e(I,{class:"text-h5"},{default:a(()=>[i("Are you sure you want to delete this item?")]),_:1}),e(k,null,{default:a(()=>[e(u),e(n,{color:"error",variant:"flat",onClick:s.closeDelete},{default:a(()=>[i("Cancel")]),_:1},8,["onClick"]),e(n,{color:"success",variant:"flat",onClick:s.deleteItemConfirm},{default:a(()=>[i("OK")]),_:1},8,["onClick"]),e(u)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),"item.actions":a(({item:d})=>[e(h,{size:"small",class:"me-2",onClick:y=>s.editItem(d.raw)},{default:a(()=>[i(" mdi-pencil ")]),_:2},1032,["onClick"]),e(h,{size:"small",onClick:y=>s.deleteItem(d.raw)},{default:a(()=>[i(" mdi-delete ")]),_:2},1032,["onClick"])]),_:1},8,["headers","items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const se=$(L,[["render",W]]);export{se as default};
